# v0.27 üöÄ

This document contains release notes pertaining to the `v0.27.x` releases of Vela.

## For Vela Administrators

- When upgrading from the previous release, please take note of the [migration information](/migrations/v0.27/README.md)

## v0.27.2 

### üì¶ go-vela/server

- fix(oidc): no trailing colon on non-action events in claim [#1355](https://github.com/go-vela/server/pull/1355) - thanks [@ecrupper](https://github.com/ecrupper)!
- fix(db/log): remove redundant service_id and step_id indices from log table [#1344](https://github.com/go-vela/server/pull/1344) - thanks [@wass3r](https://github.com/wass3r)!
- fix(compiler): always include build repo in install and add VELA_GIT_TOKEN [#1346](https://github.com/go-vela/server/pull/1346) - thanks [@ecrupper](https://github.com/ecrupper)!

### üì¶ go-vela/worker

- enhance(client): use scm token as secondary auth header for exec client [#657](https://github.com/go-vela/worker/pull/657) - thanks [@ecrupper](https://github.com/ecrupper)!

### üì¶ go-vela/sdk-go

- enhance(auth): add build token auth for multiple token headers [#369](https://github.com/go-vela/sdk-go/pull/369) - thanks [@ecrupper](https://github.com/ecrupper)!

## v0.27.1

### üì¶ go-vela/server

- fix(jsonschema): allow origin secrets [#1341](https://github.com/go-vela/server/pull/1341) - thanks [@wass3r](https://github.com/wass3r)!
- fix(compiler)!: rectify service and secret rulesets for Compile and CompileLite [#1339](https://github.com/go-vela/server/pull/1339) - thanks [@ecrupper](https://github.com/ecrupper)!
- fix(rulesets): eval other rules at compile time with status declared [#1340](https://github.com/go-vela/server/pull/1340) - thanks [@ecrupper](https://github.com/ecrupper)!
- enhance: use installation token for status updates when available [#1337](https://github.com/go-vela/server/pull/1337) - thanks [@ecrupper](https://github.com/ecrupper)!
- fix(scm): inherit custom props in translation to Vela repo [#1336](https://github.com/go-vela/server/pull/1336) - thanks [@ecrupper](https://github.com/ecrupper)!
- fix(log): add log cleanup functionality and missing indices [#1334](https://github.com/go-vela/server/pull/1334) - thanks [@wass3rw3rk](https://github.com/wass3rw3rk)!
- fix(compiler): add id request field to origin container config for YAML type [#1331](https://github.com/go-vela/server/pull/1331) - thanks [@ecrupper](https://github.com/ecrupper)!

### üì¶ go-vela/worker  

- fix(dep): bump go-vela/sdk-go to proper v0.27.0 [#652](https://github.com/go-vela/worker/pull/652) - thanks [@wass3rw3rk](https://github.com/wass3rw3rk)!


## v0.27.0

### üì£ Highlights

- New `eval` logic in rulesets for improved flexibility and customization of pipeline execution
- Enhancements to increase compatibility with GitHub Enterprise Cloud
- Repo allowlist for secrets to improve security and control over secret usage
- Report missing secrets in CLI to help users identify issues in their pipelines for local execution
- Base64 option for outputs to simplify handling of encoded data
- Various bug fixes and enhancements to improve overall stability and performance

### üí• Breaking Changes

#### Admins

If you configured Vela to use a [custom webhook address](https://go-vela.github.io/docs/reference/installation/server#vela_scm_webhook_addr), it previously appended `/webhook` to the supplied address. It will now use the address as-is, so please ensure your configuration reflects this change.

Other breaking changes are related to changes to database table structures, please refer to the migration information.

#### Users

Pipeline execution will now fail fast if ruleset definitions are invalid, helping users catch misconfigurations earlier.

- (server) enhance(compiler)!: return rules unmarshal errors [#1270](https://github.com/go-vela/server/commit/3da62c50d0e63d5d9b7fcdbe8c54d9b838ec4256) - thanks [@ecrupper](https://github.com/ecrupper)!
- (server) enhance(log)!: add timestamp field [#1311](https://github.com/go-vela/server/commit/cd2acb209e3dc860bd08a3f3e2866dc3c0077af0) - thanks [@wass3rw3rk](https://github.com/wass3rw3rk)!
- (server) enhance(settings)!: make dashboard repo limit adjustable by platform admins [#1303](https://github.com/go-vela/server/commit/00667642892350f8871f7d7089cd1fa3f46cb15f) - thanks [@ecrupper](https://github.com/ecrupper)!
- - (server) enhance(scm)!: support truly custom webhook address [#1273](https://github.com/go-vela/server/commit/6ddedeb0eff1886e914e2e4098f38d590fffef80) - thanks [@ecrupper](https://github.com/ecrupper)!
- (server) feat(repo)!: custom properties tracking for repository resource and OIDC claim field [#1281](https://github.com/go-vela/server/commit/ad53d05d660eab32eedc5d4d4ad1b0791874e98f) - thanks [@ecrupper](https://github.com/ecrupper)!
- (server) feat!: role mapping for vela permissions [#1304](https://github.com/go-vela/server/commit/5d9c62507972db1c92d49466ced990b1fccb959f) - thanks [@ecrupper](https://github.com/ecrupper)!
- (server) feat(secrets)!: add repository allowlist to org and shared secrets [#1302](https://github.com/go-vela/server/commit/de013f9d8f19895f76b9eb6adf5e73e04fed8483) - thanks [@ecrupper](https://github.com/ecrupper)!
- (server) feat!: support restart limits for pending builds based on queue length [#1320](https://github.com/go-vela/server/commit/81f50fad35b1ff213b7693dfce36a95f1c0a3b79) - thanks [@ecrupper](https://github.com/ecrupper)!
- (sdk-go) fix(int)!: add int32 and fix int  [#353](https://github.com/go-vela/sdk-go/commit/0f27f9202249090b7d3713bd25dd3e79fe21c1e2) - thanks [@timhuynh94](https://github.com/timhuynh94)!
- (server) fix(database)!: adjust table types to match database/sql types [#1260](https://github.com/go-vela/server/commit/5fb9a3852eba655eb431ae6de4595898767b9631) - thanks [@ecrupper](https://github.com/ecrupper)!
- (worker) fix(int)!: fix int types and update to urfave v3 [#632](https://github.com/go-vela/worker/commit/96d569b1dade2a7c43c3719338debc82d58e1cb4) - thanks [@timhuynh94](https://github.com/timhuynh94)!
- (server) refactor(ruleset)!: improve match code efficiency and properly handle status [#1255](https://github.com/go-vela/server/commit/35e61d83d2d592002e939af7e31e819751c47dd3) - thanks [@ecrupper](https://github.com/ecrupper)!

### ‚ú® Features

- (cli) feat(exec): report missing secrets [#595](https://github.com/go-vela/cli/commit/309a875b6d2be82c9bfc98ece0b134de718a7142) - thanks [@wass3r](https://github.com/wass3r)!
- (cli) feat(secret): add/update repo allowlist [#608](https://github.com/go-vela/cli/commit/484d6948870c6ce31fda1904a88d3ac8e137ced3) - thanks [@wass3r](https://github.com/wass3r)!
- (server) feat(ruleset): add eval logic [#1301](https://github.com/go-vela/server/commit/ffbf098e7481e92a52234332c33f3be9f72ca783) - thanks [@JordanSussman](https://github.com/JordanSussman)!
- (ui) feat(admin): add max dashboard repos to platform settings page [#852](https://github.com/go-vela/ui/commit/02112e5274d39d2b84a26041bbd1ab5d5864026c) - thanks [@ecrupper](https://github.com/ecrupper)!
- (ui) feat: Clarifies in placeholder what deployment Ref field loads [#859](https://github.com/go-vela/ui/commit/528722b2dd661571063709e08ef2d9f0daeaf7ec) - thanks [@colindean](https://github.com/colindean)!
- (ui) feat(secrets): add repo allowlist to shared and org secret forms [#856](https://github.com/go-vela/ui/commit/372b506ed1a3b235559c9155c1033e15da5d8b69) - thanks [@ecrupper](https://github.com/ecrupper)!

### üêõ Bug Fixes

- (cli) fix(color): no color for non-tty [#611](https://github.com/go-vela/cli/commit/1624c7f9d6ec3fea36257732d23f071a6f909e0a) - thanks [@wass3r](https://github.com/wass3r)!
- (cli) fix(renovate): container images [#606](https://github.com/go-vela/cli/commit/60ca290aa9bacd22d5449287acbd4e2b433d6f21) - thanks [@wass3r](https://github.com/wass3r)!
- (cli) fix(renovate): use go-vela/server setup to manage image updates [#610](https://github.com/go-vela/cli/commit/51341f0f860df9f8194b40be73e2ac8ef910c3ab) - thanks [@wass3r](https://github.com/wass3r)!
- (cli) fix(urfave): replace c.Bool on string flags with internal helper function [#607](https://github.com/go-vela/cli/commit/efc80c03dec4b265e59500afd8ae8f89d8e4b14d) - thanks [@wass3r](https://github.com/wass3r)!
- (cli) fix(urfave): use new help var in help template [#609](https://github.com/go-vela/cli/commit/f0658b51057034c1931385af036dab55ce801158) - thanks [@wass3r](https://github.com/wass3r)!
- (server) fix(api): pass correct build into Gatekeep helper func [#1313](https://github.com/go-vela/server/commit/2d72fe661c969e6608be5bc69617f25f42866074) - thanks [@ecrupper](https://github.com/ecrupper)!
- (server) fix(api/pipeline): use WithUser on middleware compile [#1272](https://github.com/go-vela/server/commit/0ca9829add359c264728d0c6a59fe88fef0f3010) - thanks [@wass3rw3rk](https://github.com/wass3rw3rk)!
- (server) fix(compiler): add id request field to origin container config for YAML type [#1331](https://github.com/go-vela/server/commit/3535619d078fa1d687dc3a88a31591582fb66c3f) - thanks [@ecrupper](https://github.com/ecrupper)!
- (server) fix(compiler): allow for private github.com templates [#1299](https://github.com/go-vela/server/commit/6d468bf8b1c490239715dd197f464062a99be208) - thanks [@ecrupper](https://github.com/ecrupper)!
- (server) fix(compiler): split validate into YAML and Pipeline [#1268](https://github.com/go-vela/server/commit/b9dedee9a1928464def1a73b966f7cfbf3977069) - thanks [@ecrupper](https://github.com/ecrupper)!
- (server) fix(linter): migrate to v2 due to breaking changes [#1277](https://github.com/go-vela/server/commit/a656d795a99c5647bf88f7d061e5620e7250dd6b) - thanks [@timhuynh94](https://github.com/timhuynh94)!
- (server) fix(lint): export returned structs from instantiation funcs and pass context to queue [#1291](https://github.com/go-vela/server/commit/27a5e0cb639ea897071456e87959bdb006383885) - thanks [@ecrupper](https://github.com/ecrupper)!
- (server) fix(log): add log cleanup functionality and missing indices [#1334](https://github.com/go-vela/server/commit/77cce494360b3bc4506a824f56288c5c34468ae8) - thanks [@wass3rw3rk](https://github.com/wass3rw3rk)!
- (server) fix(queue): remove validation of public key from flag set [#1293](https://github.com/go-vela/server/commit/d7ea1842d44dfbe1f994c12cf40cbcc0d3935e42) - thanks [@ecrupper](https://github.com/ecrupper)!
- (server) fix(queue): validate addr in opts not flags [#1305](https://github.com/go-vela/server/commit/65bc63764b8b2af13fdd2d4c26057c448ec4d4ac) - thanks [@ecrupper](https://github.com/ecrupper)!
- (server) fix(scm): drop /webhook from addr in update webhook config [#1296](https://github.com/go-vela/server/commit/d9df783d0fd3b09e5a247bd20f60ec2ffd114ef4) - thanks [@ecrupper](https://github.com/ecrupper)!
- (server) fix(scm): listen to custom_property_values event for live updates [#1315](https://github.com/go-vela/server/commit/51dbf45ee6dd0504872310a787e87d9672d208cd) - thanks [@ecrupper](https://github.com/ecrupper)!
- (server) fix(scm): set all repo info in custom props handler [#1319](https://github.com/go-vela/server/commit/35670dd79eeb5ad4ec8a82d0532a5b339843954a) - thanks [@ecrupper](https://github.com/ecrupper)!
- (server) fix(secret): use different query for empty allowlist [#1316](https://github.com/go-vela/server/commit/0e450d5055d6b4d03f82e5b2fef1afc116e61b94) - thanks [@ecrupper](https://github.com/ecrupper)!
- (ui) fix(logs): better ux with missing logs, prevent refetch [#874](https://github.com/go-vela/ui/commit/b6a5383fa82817bd4fa994b5a79fb4028702b45f) - thanks [@wass3rw3rk](https://github.com/wass3rw3rk)!
- (ui) fix(pagination): handle new pagination cases from server changes [#843](https://github.com/go-vela/ui/commit/fe5a96df92264bf9915e8471137637c0a4f10291) - thanks [@ecrupper](https://github.com/ecrupper)!
- (worker) fix(secret): prevent spillover of init logs into downstream steps [#639](https://github.com/go-vela/worker/commit/3738750c678552fa013df545fda18d1e1f51bcba) - thanks [@ecrupper](https://github.com/ecrupper)!

### üö∏ Enhancements

- (cli) enhance(settings): add new fields to admin settings command [#602](https://github.com/go-vela/cli/commit/7408fd9fc955634dcd2255815dc4f778c0c41bc0) - thanks [@ecrupper](https://github.com/ecrupper)!
- (server) enhance(github): use visibility field if present in toAPIRepo func [#1306](https://github.com/go-vela/server/commit/1885b1ded3b78a4c116054ed102f37bc8a8bd27c) - thanks [@ecrupper](https://github.com/ecrupper)!
- (server) enhance(oidc): stringify int and bool claims [#1318](https://github.com/go-vela/server/commit/ec2dca5e078ba3539ece90c7b07e47b90282ecb7) - thanks [@ecrupper](https://github.com/ecrupper)!
- (server) enhance: optimize source repos [#1308](https://github.com/go-vela/server/commit/ca5ab16522e068aad06d7a1edf9cea6a9c380b4a) - thanks [@ecrupper](https://github.com/ecrupper)!
- (server) enhance(pagination): remove total results calculation for performance improvement [#1254](https://github.com/go-vela/server/commit/931af70cecc27b0ee1a2330c08e3e311221c407d) - thanks [@ecrupper](https://github.com/ecrupper)!
- (server) enhance(scm): verify owner access to repos prior to generating install token [#1317](https://github.com/go-vela/server/commit/b658bf82eb5013efb495e8614c87310190a60955) - thanks [@ecrupper](https://github.com/ecrupper)!
- (server) enhance(testing): use a helper function to generate mock rows based on struct tags [#1285](https://github.com/go-vela/server/commit/e7d6da0fd8344947ad8c26f1f07b6dea7f205245) - thanks [@ecrupper](https://github.com/ecrupper)!
- (ui) enhance: add queue restart limit to admin settings and route to build tooltip [#858](https://github.com/go-vela/ui/commit/5044544a26c8439c9e2f50f721afe23ffc3563dd) - thanks [@ecrupper](https://github.com/ecrupper)!
- (worker) enhance(outputs): add base64 option that is automatically decoded [#646](https://github.com/go-vela/worker/commit/daae026dfce965ef48f79abe511fa6298e5265d1) - thanks [@ecrupper](https://github.com/ecrupper)!

### üîß Miscellaneous

- (sdk-go) chore: bump server to latest [#358](https://github.com/go-vela/sdk-go/commit/a78afa8baa911519d1bda126856b8f9bedb61f83) - thanks [@wass3rw3rk](https://github.com/wass3rw3rk)!
- (sdk-go) chore(linter): update config to v2 [#357](https://github.com/go-vela/sdk-go/commit/ff14a393e9b07242df20bfb8357363b8413b3f45) - thanks [@wass3rw3rk](https://github.com/wass3rw3rk)!
- (sdk-go) chore: use proper int sizing based on server [#355](https://github.com/go-vela/sdk-go/commit/fcaaf9b4639df40bd16e7b75e76d40579949268d) - thanks [@ecrupper](https://github.com/ecrupper)!
- (server) chore(go): bump go to 1.24.2 [#1284](https://github.com/go-vela/server/commit/fb0542c13686ea9dbcdbf21a75098063efef3359) - thanks [@wass3rw3rk](https://github.com/wass3rw3rk)!
- (server) chore(lint): update linter rules [#1265](https://github.com/go-vela/server/commit/7a7363fb86b0077e531ec38e2a6d80d9750bbdac) - thanks [@ecrupper](https://github.com/ecrupper)!
- (worker) chore: bump server + sdk to latest [#638](https://github.com/go-vela/worker/commit/4303e2b88fd1000fcfa56fb3a47e38b050532182) - thanks [@wass3rw3rk](https://github.com/wass3rw3rk)!
- (worker) chore: update linter config to use v2 [#637](https://github.com/go-vela/worker/commit/55c4a40cd03bb4b10c22978556ade3c6e20d8670) - thanks [@wass3rw3rk](https://github.com/wass3rw3rk)!

### ‚ôªÔ∏è Refactors

- (worker) refactor(skip): use new skip logic for stages [#625](https://github.com/go-vela/worker/commit/ec8bbe6301967550bccdb6c54af6def197c5ddfc) - thanks [@ecrupper](https://github.com/ecrupper)!

## üîó Release Links

The contributions above are a subset of the full changes in this release. For a complete list, please visit the following links:

- https://github.com/go-vela/cli/releases
- https://github.com/go-vela/sdk-go/releases
- https://github.com/go-vela/server/releases
- https://github.com/go-vela/ui/releases
- https://github.com/go-vela/worker/releases

## üíü Thank you to all the contributors in this release

- @colindean
- @ecrupper
- @JordanSussman
- @KellyMerrick
- @timhuynh94
- @wass3r
- @wass3rw3rk